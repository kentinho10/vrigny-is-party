<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Admin Classement</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <button onclick="location.href='index.html'">← Accueil</button>
  <h2>Administration du classement</h2>
  <table id="admin-table">
    <thead><tr><th>Nom</th><th>Points</th><th>Modifier</th></tr></thead>
    <tbody></tbody>
  </table>
  <input type="text" id="new-name" placeholder="Nom du joueur">
  <input type="number" id="new-score" placeholder="Points">
  <button onclick="saveScores()">Ajouter / Mettre à jour</button>

  <script>
    let adminData = JSON.parse(localStorage.getItem('players')||'[]');

    function renderTable() {
      const tbody = document.querySelector('#admin-table tbody');
      tbody.innerHTML = '';
      adminData.forEach((p,i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = '<td>'+p.name+'</td><td>'+p.score+'</td>';
        const tdMod = document.createElement('td');
        const btn = document.createElement('button');
        btn.textContent='✏️';
        btn.onclick = () => {
          const np = prompt('Nouveaux points pour '+p.name, p.score);
          if(np!==null) {
            p.score = parseInt(np);
            localStorage.setItem('players', JSON.stringify(adminData));
            renderTable();
          }
        };
        tdMod.appendChild(btn);
        tr.appendChild(tdMod);
        tbody.appendChild(tr);
      });
    }

    function saveScores() {
      const name = document.getElementById('new-name').value.trim();
      const score = parseInt(document.getElementById('new-score').value);
      if(!name||isNaN(score)) return alert('Nom et points requis');
      const idx = adminData.findIndex(p=>p.name===name);
      if(idx>=0) adminData[idx].score = score;
      else adminData.push({name,score});
      localStorage.setItem('players', JSON.stringify(adminData));
      renderTable();
    }

    renderTable();
  </script>
</body>
</html>
